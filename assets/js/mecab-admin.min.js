!function($){"use strict";$(document).ready(function(){$(".example-toggle").click(function(e){e.preventDefault(),$("div.example").toggleClass("toggle")}),$("#mecab-csv-installer").click(function(e){e.preventDefault(),$.get($(this).attr("href")).done(function(e){e.success?$("#user_dic_path").val(e.message):alert(e.message)}).fail(function(e,t,s){alert(s)})});var e={start:null,form:$("#mecab-index-building-form"),doRequest:function(t){$("#indicator-bar").css("width",t.ratio),t.finished?($("#form-message").removeClass("loading"),e.resetForm(),e.form.addClass("finished").find("input[type=submit]").attr("disabled",!1)):(e.form.find("input[name=offset]").val(t.offset),e.form.ajaxSubmit({success:e.doRequest,error:e.errorHandler})),e.addMessage(t.message)},resetForm:function(){this.form.find("input[name=offset]").val("0"),$("#form-message").empty()},addMessage:function(t,s){var a=$(document.createElement(s?"strong":"span")),r=$("#form-message"),o=Math.floor(((new Date).getTime()-e.start.getTime())/1e3);a.text("["+o+"sec] "+t).appendTo(r),r.scrollTop(r.get(0).scrollHeight)},errorHandler:function(){$("#form-message").removeClass("loading"),e.addMessage("Error!",!0),e.form.attr("diabled",!1)}};e.form.length&&e.form.submit(function(t){t.preventDefault(),e.form.find("input[type=submit]").attr("disabled",!0),$("#indicator-bar").css("width",0),$("#form-message").addClass("loading"),e.start=new Date,e.form.ajaxSubmit({success:e.doRequest,error:e.errorHandler})}),$("#mecab-performance").submit(function(t){t.preventDefault(),e.start=new Date,e.resetForm(),$("#form-message").addClass("loading"),$(this).ajaxSubmit({success:function(t){$("#form-message").removeClass("loading"),$.each(t.message.split("\n"),function(t,s){e.addMessage(s)})}})});var t=function(e,t){var s=$("<p></p>");t&&s.addClass("error"),s.text(e),$("#token-result").append(s),setTimeout(function(){s.remove()},3e3)};$(document).on("click","#cost-exec",function(e){e.preventDefault();var s=$("#cost-calc").val(),a=$("#token-result");s.length&&(a.empty(),$.get($(this).attr("href"),{s:s}).done(function(e){e.tokens.length?$.each(e.tokens,function(e,t){a.append($('<a href="#" data-cost="'+t.cost+'"></a>').text(t.surface+" ("+t.cost+")"))}):t(e.message,!0)}).fail(function(e,s,a){t(a,!0)}))}),$("#token-result").on("click","a",function(e){e.preventDefault(),$("#cost").val($(this).attr("data-cost"))});var s=function(e,t){var s=$("<div><p></p></div>");s.addClass(t?"error":"updated"),s.find("p").text(e),$("#morphem-editor").before(s),setTimeout(function(){s.remove()},5e3)};$("#morphem-editor").submit(function(e){alert("sou新する"),e.preventDefault();var t=$(this);t.ajaxSubmit({success:function(e){s(e.message,!e.success),e.reset&&t.get(0).reset()},error:function(e,t,a){s(a,!0)}})})})}(jQuery);